set timeout=5
set default=0

# Force text mode throughout the boot stack to avoid video warnings
terminal_input console
terminal_output console
set gfxpayload=text

menuentry "AltoniumOS - BIOS 32-bit Kernel" {
    set altonium_video_arg=video=text
    multiboot /boot/x86/kernel.elf bootmode=bios arch=x86 $altonium_video_arg
    boot
}

menuentry "AltoniumOS - BIOS Safe Mode (No EDD)" {
    set altonium_video_arg=video=text
    multiboot /boot/x86/kernel.elf bootmode=bios arch=x86 edd=off $altonium_video_arg
    boot
}

menuentry "AltoniumOS - UEFI 32-bit Kernel" {
    set altonium_video_arg=video=text
    multiboot /boot/x86/kernel.elf bootmode=uefi arch=x86 $altonium_video_arg
    boot
}

menuentry "AltoniumOS - UEFI 64-bit Kernel (Placeholder)" {
    set altonium_video_arg=video=text
    multiboot /boot/x64/kernel64.elf bootmode=uefi arch=x64 $altonium_video_arg
    boot
}

menuentry "AltoniumOS - Text Only Mode" {
    set altonium_video_arg=novideo
    multiboot /boot/x86/kernel.elf bootmode=bios arch=x86 $altonium_video_arg
    boot
}

menuentry "Hardware Diagnostics" {
    echo "==================================="
    echo "AltoniumOS Hardware Diagnostics"
    echo "==================================="
    echo ""
    echo "System Information:"
    echo "  Boot Mode: GRUB Multiboot"
    echo "  Architecture: Checking..."
    echo ""
    echo "Memory Map:"
    lsmmap
    echo ""
    echo "Available Devices:"
    ls -l
    echo ""
    echo "Press any key to return to menu..."
    read
}
